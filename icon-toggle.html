<link rel="import" href="../polymer/polymer-element.html">
<!-- For class-style elements based on Polymer.Element, you need to explicitly add gesture support by importing and using the Polymer.GestureEventListeners mixin -->
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../iron-icon/iron-icon.html">

<dom-module id="icon-toggle">
  <template>
    <style>
      /* shadow DOM styles go here */
      :host { /* :host is a pseudo-class that matches the custom element you're defining. this is the element that contains or hosts the local DOM tree. */
        display: inline-block;
      }
      iron-icon {
        fill: var(--icon-toggle-color, rgba(0,0,0,0)); /* svg specific CSS property */
        stroke: var(--icon-toggle-outline-color, currentcolor); /* svg specific CSS property (outline) */
      }
      :host([pressed]) iron-icon { /* The :host() function matches the host element if the selector inside the parentheses matches the host element. */
        fill: var(--icon-toggle-pressed-color, currentcolor);  /* svg specific CSS property */
      }
    </style>

    <!-- shadow DOM goes here -->
    <!-- The <iron-icon> element is a custom element that renders an icon. Here it's hard-coded to use an icon named "polymer". -->
    <!-- <iron-icon icon="polymer"></iron-icon> -->
    <!-- The icon="[[toggleIcon]]" assignment is a data binding. It links your element's toggleIcon property with the <iron-icon>'s icon property. -->
    <iron-icon icon="[[toggleIcon]]"></iron-icon>
  </template>

  <script>
    class IconToggle extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() {
        return 'icon-toggle'; // this name must match the id on the dom-module in the element's template definition
      }
      static get properties() {
        return { // properties to use on HTML elements
          pressed: {
            type: Boolean,
            notify: true, // tells Polymer to dispatch property change events when the property value changes. This lets the change be observed by other nodes.
            reflectToAttribute: true, // tells Polymer to update the corresponding attribute when the property changes. This lets you style the element using an attribute selector, like icon-toggle[pressed].
            value: false
          },
          toggleIcon: {
            type: String
          }
        }
      }
      constructor() {
        super(); // right now it does nothing, just a placeholder
        // Use the standard addEventListener method to add event listeners imperatively
        // The tap event is generated by Polymer's gesture system when the user clicks or taps on a target with a mouse or finger.
        Polymer.Gestures.addListener(this, 'tap', () => this.toggle());
      }
      toggle() {
        this.pressed = !this.pressed;
      }
    }
    customElements.define(IconToggle.is, IconToggle); //register the element
  </script>
</dom-module>

